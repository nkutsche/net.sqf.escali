<svrl:schematron-output xmlns:svrl="http://purl.oclc.org/dsdl/svrl" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:es="http://www.escali.schematron-quickfix.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:sqf="http://www.schematron-quickfix.com/validator/process" es:phase="#ALL"><sqf:topLevel xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" schema="file:///C:/Users/Nico/Desktop/eclipse/workspace/net.sqf.tester/data/schematron/test-sqf-4/in/title.sch" instance="file:///C:/Users/Nico/Desktop/eclipse/workspace/net.sqf.tester/data/schematron/test-sqf-4/in/title.xml"><xsl:stylesheet xmlns="http://www.w3.org/1999/xhtml" version="2.0" xpath-default-namespace="http://www.w3.org/1999/xhtml"><xsl:include href="file:/C:/Users/Nico/Desktop/eclipse/workspace/net.sqf.escali/xml/xsl/01_compiler/escali_compiler_0_functions.xsl"/><xsl:param name="xsm:xml-save-mode" select="'true'"/><xsl:template match="/"><xsl:choose><xsl:when test="$xsm:xml-save-mode = 'true'"><xsm:manipulator document="file:///C:/Users/Nico/Desktop/eclipse/workspace/net.sqf.tester/data/schematron/test-sqf-4/in/title.xml"><xsl:apply-templates select="node()"><xsl:with-param name="xsm:xml-save-mode" select="true()" as="xs:boolean" tunnel="yes"/></xsl:apply-templates></xsm:manipulator></xsl:when><xsl:otherwise><xsl:apply-templates select="node()"><xsl:with-param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/></xsl:apply-templates></xsl:otherwise></xsl:choose></xsl:template><xsl:output method="xml"/><xsl:key name="sqf:nodesById" match="node()" use="generate-id()"/><xsl:template match="node()|@*" priority="-2" mode="addAtt addChild"/><xsl:template match="node() | @*" priority="-3" mode="#all"><xsl:param name="xsm:xml-save-mode" tunnel="yes" select="false()" as="xs:boolean"/><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsl:apply-templates select="node() | @*"/></xsl:when><xsl:otherwise><xsl:copy><xsl:apply-templates select="node() | @*"/></xsl:copy></xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet></sqf:topLevel><svrl:active-pattern es:id="d5e5"/><svrl:fired-rule context="title" es:id="d5e7"/><svrl:successful-report location="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" es:id="d6e5_d5e11" test="comment()"><svrl:text>Comments are forbidden in &lt;title&gt; elements.</svrl:text><sqf:fix xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" fixId="deleteComment" messageId="d5e11" contextId="d6e5" id="deleteComment-d5e11-d6e5" role="delete" default="true"><sqf:description><svrl:text>Delete the comment.</svrl:text></sqf:description><sqf:sheet><xsl:template match="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]/comment()[1]" priority="11"><xsl:param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/><xsl:variable name="ruleContext" select="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]"/><xsl:variable name="activityContext" select="self::node()"/><xsl:for-each select="$ruleContext"><xsl:variable name="titleText" select="string-join(.//text(),'')"/><xsl:for-each select="$activityContext"><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsm:replace><xsl:attribute name="node" select="es:getNodePath(.)"/><xsm:content><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>delete-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>delete-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsm:content></xsm:replace></xsl:when><xsl:otherwise><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>delete-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>delete-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsl:otherwise></xsl:choose></xsl:for-each></xsl:for-each></xsl:template></sqf:sheet></sqf:fix></svrl:successful-report><svrl:successful-report location="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" es:id="d6e5_d5e14" test="string-length($titleText) gt 70"><svrl:text>The text in the &lt;title&gt; element is too long.</svrl:text><sqf:fix xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" fixId="cutTitle" messageId="d5e14" contextId="d6e5" id="cutTitle-d5e14-d6e5" role="replace"><sqf:description><svrl:text>Cut the title after the 70th character.</svrl:text></sqf:description><sqf:sheet><xsl:template match="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" priority="11"><xsl:param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/><xsl:variable name="ruleContext" select="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]"/><xsl:variable name="activityContext" select="self::node()"/><xsl:for-each select="$ruleContext"><xsl:variable name="titleText" select="string-join(.//text(),'')"/><xsl:for-each select="$activityContext"><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsm:replace><xsl:attribute name="node" select="es:getNodePath(.)"/><xsm:content><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="substring(.,1,70)"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsm:content></xsm:replace></xsl:when><xsl:otherwise><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="substring(.,1,70)"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsl:otherwise></xsl:choose></xsl:for-each></xsl:for-each></xsl:template></sqf:sheet></sqf:fix><sqf:fix xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" fixId="setTitle" messageId="d5e14" contextId="d6e5" id="setTitle-d5e14-d6e5" role="replace"><sqf:description><svrl:text>Take the title from the first headline.</svrl:text></sqf:description><sqf:sheet><xsl:template match="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" priority="11"><xsl:param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/><xsl:variable name="ruleContext" select="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]"/><xsl:variable name="activityContext" select="self::node()"/><xsl:for-each select="$ruleContext"><xsl:variable name="titleText" select="string-join(.//text(),'')"/><xsl:for-each select="$activityContext"><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsm:replace><xsl:attribute name="node" select="es:getNodePath(.)"/><xsm:content><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="//h1[1]"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsm:content></xsm:replace></xsl:when><xsl:otherwise><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="//h1[1]"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsl:otherwise></xsl:choose></xsl:for-each></xsl:for-each></xsl:template></sqf:sheet></sqf:fix><sqf:fix xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" fixId="newTitle" messageId="d5e14" contextId="d6e5" id="newTitle-d5e14-d6e5" role="replace"><sqf:description><svrl:text>Set a new title.</svrl:text></sqf:description><sqf:user-entry xmlns="http://purl.oclc.org/dsdl/schematron"><sqf:description><svrl:text>Enter the text of the new title.</svrl:text></sqf:description><sqf:param name="newText" as="xs:string" param-id="d16e91_d5e14_d6e5"/></sqf:user-entry><sqf:sheet><xsl:param name="sqf:d16e91_d5e14_d6e5" as="xs:string"/><xsl:template match="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" priority="11"><xsl:param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/><xsl:variable name="ruleContext" select="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]"/><xsl:variable name="activityContext" select="self::node()"/><xsl:variable name="newText" select="$sqf:d16e91_d5e14_d6e5"/><xsl:for-each select="$ruleContext"><xsl:variable name="titleText" select="string-join(.//text(),'')"/><xsl:for-each select="$activityContext"><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsm:replace><xsl:attribute name="node" select="es:getNodePath(.)"/><xsm:content><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="$newText"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsm:content></xsm:replace></xsl:when><xsl:otherwise><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="$newText"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsl:otherwise></xsl:choose></xsl:for-each></xsl:for-each></xsl:template></sqf:sheet></sqf:fix><sqf:fix xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xsm="http://www.schematron-quickfix.com/manipulator/process" fixId="takeComment" messageId="d5e14" contextId="d6e5" id="takeComment-d5e14-d6e5" role="replace"><sqf:description><svrl:text>Use the forbidden comment as new title.</svrl:text></sqf:description><sqf:sheet><xsl:template match="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]" priority="11"><xsl:param name="xsm:xml-save-mode" select="false()" as="xs:boolean" tunnel="yes"/><xsl:variable name="ruleContext" select="/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='html'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='head'][1]/*[namespace-uri()='http://www.w3.org/1999/xhtml'][local-name()='title'][1]"/><xsl:variable name="activityContext" select="self::node()"/><xsl:for-each select="$ruleContext"><xsl:variable name="titleText" select="string-join(.//text(),'')"/><xsl:for-each select="$activityContext"><xsl:choose><xsl:when test="$xsm:xml-save-mode"><xsm:replace><xsl:attribute name="node" select="es:getNodePath(.)"/><xsm:content><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="comment()"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsm:content></xsm:replace></xsl:when><xsl:otherwise><xsl:processing-instruction name="sqfc-start" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction><xsl:element name="title"><xsl:value-of select="comment()"/></xsl:element><xsl:processing-instruction name="sqfc-end" sqf:changeMarker="true"><xsl:text>replace-</xsl:text><xsl:value-of select="generate-id()"/></xsl:processing-instruction></xsl:otherwise></xsl:choose></xsl:for-each></xsl:for-each></xsl:template></sqf:sheet></sqf:fix></svrl:successful-report></svrl:schematron-output>